//Arhur Agzamov NKAbd-01-25 13:20
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <iomanip>

using namespace std;

// Структура для хранения информации о поезде
struct Train {
    string destination;
    int train_number;
    string departure_time;
};

// Функция для ввода данных о поезде
Train input_train() {
    Train train;
    
    cout << "\nВведите данные о поезде:" << endl;
    
    cout << "Пункт назначения: ";
    getline(cin, train.destination);
    
    while (true) {
        cout << "Номер поезда: ";
        cin >> train.train_number;
        
        if (cin.fail() || train.train_number <= 0) {
            cin.clear();
            cin.ignore(10000, '\n');
            cout << "Номер должен быть больше 0" << endl;
        } else {
            cin.ignore();
            break;
        }
    }
    
    cout << "Время отправления (ЧЧ:ММ): ";
    getline(cin, train.departure_time);
    
    return train;
}

// Функция для вывода данных о поезде
void output_train(const Train& train) {
    cout << "Поезд №" << setw(4) << train.train_number << " | "
         << "Направление: " << setw(20) << left << train.destination << " | "
         << "Отправление: " << train.departure_time << endl;
}

// Функция для сортировки по времени отправления
bool compare_by_time(const Train& a, const Train& b) {
    return a.departure_time < b.departure_time;
}

int main() {
    cout << "ПРОГРАММА ФОРМИРОВАНИЯ ИНФОРМАЦИИ О РЕЙСАХ НА ПОЕЗДАХ" << endl;
    
    // Вектор для хранения поездов
    vector<Train> trains;
    
    cout << "\nВВОД ДАННЫХ О ПОЕЗДАХ" << endl;
    
    // Ввод поездов от пользователя
    while (true) {
        Train train = input_train();
        trains.push_back(train);
        
        string more;
        cout << "\nДобавить еще поезд? (да/нет): ";
        getline(cin, more);
        
        if (more != "да") {
            break;
        }
    }
    
    // Проверяем, есть ли поезда для сортировки
    if (trains.empty()) {
        cout << "\nОШИБКА: Не введено ни одного поезда!" << endl;
        cout << "Программа завершена." << endl;
    } else {
        // Вывод всех поездов (несортированный список)
        cout << "\nВСЕ ПОЕЗДА (НЕСОРТИРОВАННЫЕ)" << endl;
        
        for (size_t i = 0; i < trains.size(); i++) {
            cout << setw(2) << (i + 1) << ". ";
            output_train(trains[i]);
        }
        
        // Сортировка по времени отправления
        cout << "\nСОРТИРОВКА ПО ВРЕМЕНИ ОТПРАВЛЕНИЯ" << endl;
        
        if (trains.size() == 1) {
            cout << "Введен только один поезд - сортировка не требуется." << endl;
            output_train(trains[0]);
        } else {
            cout << "Поезда отсортированы по возрастанию времени отправления:" << endl;
            
            vector<Train> sorted_trains = trains;
            sort(sorted_trains.begin(), sorted_trains.end(), compare_by_time);
            
            for (size_t i = 0; i < sorted_trains.size(); i++) {
                cout << setw(2) << (i + 1) << ". ";
                output_train(sorted_trains[i]);
            }
            
            // Дополнительная информация
            cout << "\nВсего поездов: " << trains.size() << endl;
            cout << "Самый ранний рейс: " << sorted_trains[0].departure_time 
                 << " - " << sorted_trains[0].destination << endl;
            cout << "Самый поздний рейс: " << sorted_trains.back().departure_time 
                 << " - " << sorted_trains.back().destination << endl;
        }
    }
    
    return 0;
}